import UIKit

class Product {
    var name: String
    var number: String
    var imageURL: URL

    init(name: String, number: String, imageURL: URL) {
        self.name = name
        self.number = number
        self.imageURL = imageURL
    }
}

class GameViewController: UIViewController {
    @IBOutlet weak var productImageView: UIImageView!
    @IBOutlet weak var inputTextField: UITextField!
    @IBOutlet weak var messageLabel: UILabel!

    var products = [Product]()
    var currentProduct: Product?
    var score = 0

    override func viewDidLoad() {
        super.viewDidLoad()
        loadProducts()
        startNewRound()
    }

    func loadProducts() {
        let apple = Product(name: "Apple", number: "123", imageURL: URL(string: "https://www.example.com/apple.jpg")!)
        let banana = Product(name: "Banana", number: "456", imageURL: URL(string: "https://www.example.com/banana.jpg")!)
        let orange = Product(name: "Orange", number: "789", imageURL: URL(string: "https://www.example.com/orange.jpg")!)
        products = [apple, banana, orange]
    }

    func startNewRound() {
        currentProduct = products.randomElement()
        displayProduct()
    }

    func displayProduct() {
        guard let product = currentProduct else { return }
        do {
            let imageData = try Data(contentsOf: product.imageURL)
            productImageView.image = UIImage(data: imageData)
        } catch {
            print("Failed to load image:", error)
        }
    }

    @IBAction func confirmButtonPressed(_ sender: UIButton) {
        guard let input = inputTextField.text, let currentProduct = currentProduct else { return }
        if input == currentProduct.number {
            score += 1
            messageLabel.text = "Correct!"
        } else {
            messageLabel.text = "Incorrect! Try again."
        }
        inputTextField.text = ""
        startNewRound()
    }
}
